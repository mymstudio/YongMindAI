<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>咏心 AI</title>
    <link rel="stylesheet" href="创心睿咏CSS.css">
    <link rel="stylesheet" href="index.js">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.js" referrerpolicy="no-referrer"></script>
    <!-- 引入 layui.css -->
    <link href="//unpkg.com/layui@2.9.16/dist/css/layui.css" rel="stylesheet">
    <!-- 引入 layui.js -->
    <script src="//unpkg.com/layui@2.9.16/dist/layui.js"></script>
</head>
<body>
    <div class="cl">
      <img src="容器 4 (6).svg" alt="LOGO" style="width: 88px; margin-bottom: 32px;">
      <div class="bt_h">
        <img src="对话.svg" alt="" width="28px" class="bt_hi" c>
        <h3 style="font-size: 15px; color: white; margin: 6px;">对话</h3>
      </div>
      <div class="bt" id="zhinengti" onclick="znt()">
        <?xml version="1.0" standalone="no"?>
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
        <svg t="1724155703231" class="bti" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5456" xmlns:xlink="http://www.w3.org/1999/xlink" width="26" height="26">
            <path d="M877.795556 279.893333c9.728 5.688889 15.758222 16.042667 15.758222 27.306667v404.138667a31.573333 31.573333 0 0 1-15.758222 27.306666l-350.037334 202.126223a31.516444 31.516444 0 0 1-31.516444 0L146.204444 738.702222a31.573333 31.573333 0 0 1-15.758222-27.306666V307.2c0-11.264 6.030222-21.617778 15.758222-27.306667l350.037334-202.069333a31.516444 31.516444 0 0 1 31.516444 0L877.795556 279.893333zM564.565333 14.108444a105.130667 105.130667 0 0 0-105.130666 0L109.454222 216.177778C76.913778 234.951111 56.888889 269.653333 56.888889 307.2v404.138667c0 37.546667 20.024889 72.248889 52.565333 91.022222l349.980445 202.126222c32.540444 18.773333 72.590222 18.773333 105.130666 0l349.980445-202.126222c32.540444-18.773333 52.565333-53.475556 52.565333-91.022222V307.2c0-37.546667-20.024889-72.248889-52.565333-91.022222L564.565333 14.108444z" p-id="5457" fill="#ffffff" fill-rule="evenodd"></path>
            <path d="M805.205333 304.64a36.807111 36.807111 0 0 0-51.143111-9.671111L493.340444 472.177778a36.807111 36.807111 0 0 0 41.358223 60.871111l260.778666-177.322667a36.807111 36.807111 0 0 0 9.671111-51.143111z" p-id="5458" fill="#ffffff" fill-rule="evenodd"></path>
            <path d="M220.842667 304.64a36.807111 36.807111 0 0 1 51.086222-9.671111L532.707556 472.177778a36.807111 36.807111 0 1 1-41.415112 60.871111L230.570667 355.783111a36.807111 36.807111 0 0 1-9.784889-51.143111h0.056889z" p-id="5459" fill="#ffffff" fill-rule="evenodd"></path>
            <path d="M512 861.411556c20.309333 0 36.807111-16.497778 36.807111-36.807112V509.269333a36.807111 36.807111 0 1 0-73.614222 0v315.335111c0 20.309333 16.497778 36.807111 36.807111 36.807112z" p-id="5460" fill="#ffffff" fill-rule="evenodd"></path>
        </svg>
        <h3 style="    font-size: 15px; 
    margin: 6px;" class="h3c">智能体</h3>
      </div>
    </div>
    <div class="bk"> 
     <div class="bkdb">
        <button class="button_xz">+ 新增对话</button>
        <h4 class="AIN">咏心 AI <span style="color: rgb(175, 175, 175); font-weight: 400;">1.0（Beta)</span></h4>
     </div>
     <div class="jies">
      <div class="chatBox" hidden=true id="message">
        
      </div>
        <div style="
        display: flex;
        flex-direction: row;   /*设置主轴方向是水平方向*/
        align-items: center;  /*设置侧轴上，子元素的排列方式为居中对齐*/
        padding: 24px;
        flex-grow:1,
        " class="an" id="hide">
       <img src="容器 4 (7).svg" alt="">
       <div>
       <h2 style="margin-left: 24px; margin-bottom: 4px; margin-top: 0px;">咏心 AI，你的全能AI助手</h2> 
       <span style="margin-left: 24px; font-size: 14px; margin-bottom: 16px;">你可以从以下话题开始与我对话</span>           

       </div>
   
        </div>
        <div style="
        display: flex;
        flex-direction: row;   /*设置主轴方向是水平方向*/
        align-items: center;  /*设置侧轴上，子元素的排列方式为居中对齐*/
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 24px;

        " class="an" id="hide1">
       <div class="card2">
         <img src="热搜-copy.svg" alt="" width="24px" style="
         margin: 16px 0px 0px 16px;
         padding: 8px;
         border-radius: 50px;
         ">
         <h3 style="
         margin: 0px 0px 6px 24px;
         ">时事热搜</h3>
         <span style="
         margin: 8px 8px 2px 24px;
         color:rgb(250, 51, 51);         
         " class="jbt">1 <span style="color: rgb(0, 0, 0); margin-left: 2px; padding-top: 1px;" class="hmt">热搜是什么</span></span>
                  <span style="
                  margin: 8px 8px 2px 24px;
                  color:rgb(250, 157, 51);         
                  " class="jbt">2 <span style="color: rgb(0, 0, 0); margin-left: 1px; padding-top: 1px;" class="hmt">热搜是什么 2</span></span>
                                    <span style="
                                    margin: 8px 8px 2px 24px;
                                    color:rgb(48, 153, 118);         
                                    " class="jbt">3 <span style="color: rgb(0, 0, 0); margin-left: 1px; padding-top: 1px;" class="hmt">热搜是什么 3</span></span>
         
       </div>
       <div class="card2">
        <img src="生成器.svg" alt="" width="24px" style="
        margin: 16px 0px 0px 16px;
        padding: 8px;
        border-radius: 50px;
        ">
        <h3 style="
        margin: 0px 0px 6px 24px;
        ">藏头诗生成器</h3>
        <span style="
        margin: 8px 8px 8px 24px;
        padding-right: 8px;
        color:rgb(0, 0, 0);         
        " class="hmt">你擅长写藏头诗：1. 巧妙将输入的字放在每句的开头；2. 诗句要押韵。3. 语义要连贯，诗题：我爱李华</span>
       </div>    
       <div class="card2">
        <img src="终端管理.svg" alt="" width="24px" style="
        margin: 16px 0px 0px 16px;
        padding: 8px;
        border-radius: 0px;
        ">
        <h3 style="
        margin: 0px 0px 6px 24px;
        ">Linux 终端</h3>
        <span style="
        margin: 8px 8px 8px 24px;
        padding-right: 11px;
        padding-bottom: 8px;
        font-size: 14px;
        color:rgb(0, 0, 0);         
        " class="hmt">你是一个 Linux 终端，我将输入命令，你将回答并仅显示，终端应该显示的内容，不需要给任何解释。我的命令是：pwd</span>
       </div>           
        </div>

     </div>
      <div style="
      display: flex;
      align-items: center;  /*设置侧轴上，子元素的排列方式为居中对齐*/
      justify-content: center;
      flex: 1;
      margin: 0 auto;
      overflow: auto;
      padding: 16px 8px 16px 20px;
      width: 100%;
      z-index: 9999999;
      height: 80px;
      background-color: rgba(255, 255, 255, 0);
      border-radius: 12px;

      " class="jx">
        <input type="textarea" class="minput" placeholder="Message YongMind AI" aria-rowcount="1"  id="prompt" >
        <button style="
        display: flex;
        flex-direction: row;   /*设置主轴方向是水平方向*/
        align-items: center;  /*设置侧轴上，子元素的排列方式为居中对齐*/
        justify-content: center;
        width: 40px;
        height: 40px;
        background-color: rgb(48, 153, 118);
        border-radius: 20px;
        margin-bottom: 0px;
        position: relative;
        z-index: 2222;
        right: 48px;
        border: none;
        
        " id="sendChat" onclick="hide(); show(); message();">
          <img src="发送.svg" alt="" width="16px">
    </button>

      </div>   
<div>
      <p style="
      width: 100%;
      text-align: center;
      align-items: center;
      margin-top: 0px;
      color: rgb(139, 139, 139);
      font-size: 12px;
      ">服务生成的所有内容均由人工智能模型生成，其生成内容的准确性和完整性无法保证，不代表我们的态度或观点</p>  
      <div  id="response" style="display: none;"></div>
</div>
    </div>
    <script>

      function calculateMd5(inputString) {
          return CryptoJS.MD5(inputString).toString();
      }

      function genToken(reqText) {
      const CryptoJS = Crypto.CryptoJS;    
      // 获取日期
          const currentDate = new Date();
          const formattedDate = `${currentDate.getFullYear()}-${(currentDate.getMonth() + 1).toString().padStart(2, '0')}-${currentDate.getDate().toString().padStart(2, '0')}`;
          const dateMd5 = calculateMd5(formattedDate).substring(0, 6); // 截取前6位
          const token = calculateMd5(reqText + dateMd5);
          return token;
      }

      async function sendChat() {
          const prompt = document.getElementById('prompt').value;
          const token = genToken(prompt);

          try {
              const response = await fetch('https://ai.coludai.cn/api/chat', {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json',
                      'ca': 'e2c688d3-2712-40e4-b596-6bc208ca645c' // 替换为您的实际CA值
                  },
                  body: JSON.stringify({
                      prompt: prompt,
                      token: token,
                      stream: false
                  })
              });

              if (!response.ok) {
                  throw new Error(`HTTP error! Status: ${response.status}`);
              }

              const data = await response.json();
              document.getElementById('response').innerText = `输出: ${data.output}`;
              var div1=document.getElementById('message');
                var name = document.getElementsByClassName("minput")[0].value;
                var div = '<div class="message frnd_message"><p>' + data.output + '<br></p></div>';
                div1.insertAdjacentHTML('beforeend',div);	//插入元素内部的最后一个子节点之后
          } catch (error) {
              console.error(error);
              document.getElementById('response').innerText = '发生错误，请检查输入或稍后再试。';
          }
      }

      document.getElementById('sendChat').addEventListener('click', sendChat);

      function hide(){
                var t = document.getElementById('hide1');//选取id为test的元素
                var t1 = document.getElementById('hide');//选取id为test的元素
                t.style.display =  'none';// 隐藏选择的元素      
                t1.style.display =  'none';// 隐藏选择的元素         
            }
      
            function show(){
                var t = document.getElementById('message');//选取id为test的元素
                t.hidden=false; 
            }
      function message(){
        var div1=document.getElementById('message');
                var name = document.getElementsByClassName("minput")[0].value;
                var div = '<div class="message my_message"><p>' + name + '<br></p></div>';
                div1.insertAdjacentHTML('beforeend',div);	//插入元素内部的最后一个子节点之后
      }
    function znt(){
      window.location.assign("");

    }
  </script>   
</body>
</html>